# 팩토리 패턴

*draft*

> 객체 지향 빵굽기
느슨한 결합으로 객체지향 디자인을 만들어봅시다
> 
- 참석자: 강시후, 문상헌, 유호성
- 스터디 일자: 2022-05-01

### 요약

상황에 따라 적절한 조치를 취하고 싶을 때 사용할 수 있음

무분별한 객체 생성을 막고, 객체 생성의 관심사를 분리하기 위해서 사용

즉 객체를 생성하는 역할은 팩토리 메서드가 전담

상황에 맞는 객체를 팩토리 메소드를 통해 반환받을 수도 있고 **(팩토리 메소드 패턴)**

추상 클래스를 여러 상황에 따라 구현하고 적절한 클래스를 골라쓸 수 있음. **(추상 팩토리 패턴)**

1주차 때 배웠던 전략 패턴과 함께 사용될 수 있는데, 특정 상황에 따라 팩토리 패턴을 이용해서 어떤 전략을 사용할 지 반환받을 수 있음

### 팩토리 메소드 패턴

객체를 생성할 때 필요한 인터페이스를 생성

어떤 클래스(서브클래스)의 인스턴스를 만들지는 서브클래스에서 결정

팩토리 메소드 패턴을 사용하면 클래스 인스턴스를 만드는 일을 서브클래스에게 맡기게 됨

### DIP (Dependency Inversion Principle)

> 추상화된 것에 의존하게 만들고
구상 클래스에 의존하지 않게 만든다
> 

*고수준 구성 요소는 다른 저수준 구성 요소에 의해 정의되는 행동이 들어있는 구성 요소를 뜻함*

***이 원칙에는 고수준 구성 요소가 저수준 구성 요소에 의존하면 안 되며, 항상 추상화에 의존하게 만들어야 한다는 뜻이 담김***

*구상 클래스처럼 구체적인 것이 아닌 추상 클래스나 인터페이스와 같이 추상적인 것에 의존하는 코드를만들어야 함*

### 추상 팩토리 패턴

추상 팩토리 패턴은 구상 클래스에 의존하지 않고도 서로 연관되거나 의존적인 객체로 이루어진 제품군을 생산하는 인터페이스를 제공

구상 클래스는 서브 클래스에서 생성

### 추상 팩토리 패턴 vs 팩토리 메소드

| 추상 팩토리 패턴 | 팩토리 메소드 패턴 |
| --- | --- |
| 객체를 써서 제품을 생성<br /> 객체 구성으로 생성 | 클래스를 써서 제품을 생성<br /> 상속으로 객체를 생성 |
| 인스턴스를 만들어 코드에 전달하는 방식을 사용 (구성을 사용) | 클래스를 확장하고 팩토리 메소드를 오버라이드 → <br /> 서브클래스를 객체로 생성 |
| 새로운 제품을 추가하려면 인터페이스 변경 | 서브클래스에서 만드는 구상 형식을 활용하는 추상 생산자에서 코드를 구현 |
| 제품군을 만드는 추상 형식 제공 <br /> 제품 생산 방법 → 서브클래스에서 정의 |  |
| 구상 팩토리를 구현할 때 팩토리 메소드로 제품을 생산할 때가 있음 |  |

---

## 의논한 부분

***구상구성클래스 vs 추상구성클래스***

- 팩토리 메소드가 저수준 객체에서 구현되는 경우에, 고수준 객체가 저수준 객체에 의존하는 상황이 발생함.(교재의 상황) 따라서 DIP를 위반하는 상황이 발생 -> 해당 상황에 추상 팩토리 사용 가능

***(p149) 서브클래스를 만들어서 객체 생성 메소드의 행동을 변경할 수 없는 단점?***

- 정적 팩토리
- 팩토리 메소드 → 그동안은 static 은 X → 객체를 상속 받아서 언제든지 재정의
- createPizza 를 구현하는 곳에서 자신의 상황에 맞게 가능
- staticMethod → 다시 정의하기는 어려움 → 메소드에 접근 가능한 상태 → static 은 항상 똑같음 → **재정의가 어려움**