# 팩토리 패턴

팩토리: 객체 생성을 처리하는 클래스

### 디자인 원칙

**바뀌는 부분을 찾아내서 → 바뀌지 않는 부분과 바뀌는 부분으로 분리 → 캡슐화**

- (피자 케이스) 피자를 선택하고 → 준비, 굽고, 자르고 ...
    
    에서 피자를 선택하는 부분이 바뀌는 부분이기 때문에 이 부분을 캡슐화하려고 함
    

팩토리 메소드는 객체 생성을 서브클래스에 캡슐화할 수 있음 (p.159)

```java
abstract Product factoryMethod(String type)
```

- 팩토리 메소드를 추상 메소드로 선언해서 서브클래스가 객체 생성을 책임지도록 함
- 팩토리 메소드는 특정 객체를 리턴, 객체는 보통 슈퍼클래스가 정의한 메소드 내에서 쓰임
- **팩토리 메소드는 클라이언트에서 실제로 생성되는 구상 객체가 무엇인지 알 수 없게 만들어줌**
- 팩토리 메소드를 만들 때 매개변수로 만들 객체 종류를 선택할 수 있음

# 팩토리 메소드 패턴

객체를 생성할 떄 필요한 인터페이스 생성

**어떤 클래스의 인스턴스를 만들지는 서브클래스에서 결정**

팩토리 메소드 패턴 → 클래스 인스턴스 만드는 일을 서브클래스에게 맡김

# 추상 팩토리 패턴

### 의존성 뒤집기 원칙

***추상화된 것에 의존하게 만들고 구상 클래스에 의존하지 않게 만든다***

1. 변수에 구상 클래스의 레퍼런스 저장 x
2. 구상 클래스에서 유도된 클래스 만들지 않기
3. 베이스 클래스에 이미 구현되어 있는 메소드를 오버라이딩 x

## 추상 팩토리 패턴

구상 클래스에 의존하지 않고도 서로 연관되거나 의존적인 객체로 이루어진 제품군을 생산하는 인터페이스 제공

구상 클래스는 서브 클래스에 생성

![Untitled](%E1%84%91%E1%85%A2%E1%86%A8%E1%84%90%E1%85%A9%E1%84%85%E1%85%B5%20%E1%84%91%E1%85%A2%E1%84%90%E1%85%A5%E1%86%AB%20c516448b42c7496c89ed49b2aa50ff59/Untitled.png)

## 추상 팩토리 패턴 vs 팩토리 메소드

| 추상 팩토리 패턴 | 팩토리 메소드 패턴 |
| --- | --- |
| 객체를 써서 제품을 생성
객체 구성으로 생성 | 클래스를 써서 제품을 생성
상속으로 객체를 생성 |
|  | 클래스를 확장하고
팩토리 메소드를 오버라이드 |
| 제품군을 만드는 추상 형식 제공
제품 생산 방법 → 서브클래스에서 정의 |  |
| 새로운 제품을 추가하려면 인터페이스 변경 |  |
| 구상 팩토리를 구현할 때
팩토리 메소드로 제품을 생산할 때가 있음 | 서브클래스에서 만드는 구상 형식을 활용하는 추상 생산자에서 코드를 구현 |